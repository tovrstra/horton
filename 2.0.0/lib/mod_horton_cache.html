

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>3.1.1. horton.cache – Avoid recomputation of earlier results and reallocation of existing arrays &mdash; HORTON 2.0.0-244-gaaf5e2b documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="HORTON 2.0.0-244-gaaf5e2b documentation" href="../index.html"/>
        <link rel="up" title="3.1. horton – The main HORTON Package" href="pck_horton.html"/>
        <link rel="next" title="3.1.2. horton.cext – C++ extensions" href="mod_horton_cext.html"/>
        <link rel="prev" title="3.1. horton – The main HORTON Package" href="pck_horton.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/horton.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                2.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../intro_horton_overview.html">1. HORTON Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro_citing_horton.html">2. Citing HORTON</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro_license_information.html">3. License Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro_contact_information.html">4. Contact Information</a></li>
</ul>
<p class="caption"><span class="caption-text">User documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user_download_and_install.html">1. Download and Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_getting_started.html">2. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_hamiltonian.html">3. Hamiltonians</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_estruct.html">4. Electronic Structure Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_postproc.html">5. Post-processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user_other.html">6. Other Topics</a></li>
</ul>
<p class="caption"><span class="caption-text">Technical stuff</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tech_dev.html">1. Developer Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tech_ref.html">2. Reference Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tech_api.html">3. API Documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="pck_horton.html">3.1. <code class="docutils literal"><span class="pre">horton</span></code> &#8211; The main HORTON Package</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">3.1.1. <code class="docutils literal"><span class="pre">horton.cache</span></code> &#8211; Avoid recomputation of earlier results and reallocation of existing arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_cext.html">3.1.2. <code class="docutils literal"><span class="pre">horton.cext</span></code> &#8211; C++ extensions</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_constants.html">3.1.3. <code class="docutils literal"><span class="pre">horton.constants</span></code> &#8211; Physicochemical constants in atomic units</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_context.html">3.1.4. <code class="docutils literal"><span class="pre">horton.context</span></code> &#8211; The context in which HORTON is used</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_exceptions.html">3.1.5. <code class="docutils literal"><span class="pre">horton.exceptions</span></code> &#8211; Definition of all excpetions in HORTON</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_log.html">3.1.6. <code class="docutils literal"><span class="pre">horton.log</span></code> &#8211; Screen logging, timing and citation management</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_moments.html">3.1.7. <code class="docutils literal"><span class="pre">horton.moments</span></code> &#8211; Auxiliary routines related to multipole moments</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_orbital_utils.html">3.1.8. <code class="docutils literal"><span class="pre">horton.orbital_utils</span></code> &#8211; Utility functions for orbital modifications</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_periodic.html">3.1.9. <code class="docutils literal"><span class="pre">horton.periodic</span></code> &#8211; Periodic table of elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_quadprog.html">3.1.10. <code class="docutils literal"><span class="pre">horton.quadprog</span></code> &#8211; A light-weight quadratic programming solver</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_symmetry.html">3.1.11. <code class="docutils literal"><span class="pre">horton.symmetry</span></code> &#8211; Geometric symmetries</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_units.html">3.1.12. <code class="docutils literal"><span class="pre">horton.units</span></code> &#8211; Conversion from and to atomic units</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_utils.html">3.1.13. <code class="docutils literal"><span class="pre">horton.utils</span></code> &#8211; Utility functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_cell_h.html">3.1.14. <code class="docutils literal"><span class="pre">horton/cell.h</span></code> &#8211; Unit cell code to specify periodic boundary conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_moments_h.html">3.1.15. <code class="docutils literal"><span class="pre">horton/moments.h</span></code> &#8211; Efficient evaluation of various of polynomials</a></li>
<li class="toctree-l3"><a class="reference internal" href="mod_horton_nucpot_h.html">3.1.16. <code class="docutils literal"><span class="pre">horton/nucpot.h</span></code> &#8211; Low-level implementation of nuclear potential on a grid</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_correlatedwfn.html">3.2. <code class="docutils literal"><span class="pre">horton.correlatedwfn</span></code> &#8211; Methods for correlated wavefunctions</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_espfit.html">3.3. <code class="docutils literal"><span class="pre">horton.espfit</span></code> &#8211; Electrostatic potential fitting</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_gbasis.html">3.4. <code class="docutils literal"><span class="pre">horton.gbasis</span></code> &#8211; Gaussian basis sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_grid.html">3.5. <code class="docutils literal"><span class="pre">horton.grid</span></code> &#8211; Numerical integration grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_io.html">3.6. <code class="docutils literal"><span class="pre">horton.io</span></code> &#8211; Input and output routines</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_localization.html">3.7. <code class="docutils literal"><span class="pre">horton.localization</span></code> &#8211; Methods for orbital localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_matrix.html">3.8. <code class="docutils literal"><span class="pre">horton.matrix</span></code> &#8211; One-, two-, three- and four-dimensional matrix implementations</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_meanfield.html">3.9. <code class="docutils literal"><span class="pre">horton.meanfield</span></code> &#8211; Mean-field electronic structure code</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_modelhamiltonians.html">3.10. <code class="docutils literal"><span class="pre">horton.modelhamiltonians</span></code> &#8211; Model Hamiltonians</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_orbital_entanglement.html">3.11. <code class="docutils literal"><span class="pre">horton.orbital_entanglement</span></code> &#8211; Methods for measuring orbital entanglement</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_part.html">3.12. <code class="docutils literal"><span class="pre">horton.part</span></code> &#8211; Density-based partitioning (fuzzy atoms-in-molecules) package</a></li>
<li class="toctree-l2"><a class="reference internal" href="pck_horton_scripts.html">3.13. <code class="docutils literal"><span class="pre">horton.scripts</span></code> &#8211; Code (solely) used by HORTON&#8217;s command line scripts</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">HORTON</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../tech_api.html">3. API Documentation</a> &raquo;</li>
      
          <li><a href="pck_horton.html">3.1. <code class="docutils literal"><span class="pre">horton</span></code> &#8211; The main HORTON Package</a> &raquo;</li>
      
    <li>3.1.1. <code class="docutils literal"><span class="pre">horton.cache</span></code> &#8211; Avoid recomputation of earlier results and reallocation of existing arrays</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/lib/mod_horton_cache.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-horton.cache">
<span id="horton-cache-avoid-recomputation-of-earlier-results-and-reallocation-of-existing-arrays"></span><h1>3.1.1. <code class="docutils literal"><span class="pre">horton.cache</span></code> &#8211; Avoid recomputation of earlier results and reallocation of existing arrays<a class="headerlink" href="#module-horton.cache" title="Permalink to this headline">¶</a></h1>
<p>In principle, the <code class="docutils literal"><span class="pre">JustOnceClass</span></code> and the <code class="docutils literal"><span class="pre">Cache</span></code> can be used
independently, but in some cases it makes a lot of sense to combine them.
See for example the density partitioning code in <code class="docutils literal"><span class="pre">horton.part</span></code>.</p>
<dl class="class">
<dt id="horton.cache.JustOnceClass">
<em class="property">class </em><code class="descclassname">horton.cache.</code><code class="descname">JustOnceClass</code><a class="headerlink" href="#horton.cache.JustOnceClass" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Base class for classes with methods that should never be executed twice.</p>
<p>In typically applications, these methods get called many times, but
only during the first call, an actual computation is carried out. This
way, the caller can safely call a method, just to make sure that a
required result is computed.</p>
<p>All methods in the subclasses that should have this feature, must be
given the <code class="docutils literal"><span class="pre">just_once</span></code> decoratore, e.g.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">JustOnceClass</span><span class="p">):</span>
    <span class="nd">@just_once</span>
    <span class="k">def</span> <span class="nf">do_something</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">foo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bar</span>
</pre></div>
</div>
<p>When all results are outdated, one can call the <code class="docutils literal"><span class="pre">clear</span></code> method
to forget which methods were called already.</p>
<dl class="method">
<dt id="horton.cache.JustOnceClass.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.JustOnceClass.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="horton.cache.Cache">
<em class="property">class </em><code class="descclassname">horton.cache.</code><code class="descname">Cache</code><a class="headerlink" href="#horton.cache.Cache" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Object that stores previously computed results.</p>
<p>The cache behaves like a dictionary with some extra features that can be
used to avoid recomputation or reallocation.</p>
<dl class="method">
<dt id="horton.cache.Cache.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.Cache.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear all items in the cache</p>
<p><strong>Optional arguments:</strong></p>
<dl class="docutils">
<dt>dealloc</dt>
<dd>When set to True, the items are really removed from memory.</dd>
<dt>tags</dt>
<dd>Limit the items cleared to those who have at least one tag
that matches one of the given tags. When this argument is used
and it contains at least one tag, items with no tags are not
cleared.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="horton.cache.Cache.clear_item">
<code class="descname">clear_item</code><span class="sig-paren">(</span><em>*key</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.Cache.clear_item" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear a selected item from the cache</p>
<p><strong>Optional arguments:</strong></p>
<dl class="docutils">
<dt>dealloc</dt>
<dd>When set to True, the item is really removed from memory.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="horton.cache.Cache.dump">
<code class="descname">dump</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.Cache.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Store an object in the cache.</p>
<p><strong>Arguments:</strong></p>
<dl class="docutils">
<dt>key1 [, key2, ...]</dt>
<dd>The positional arguments (except for the last) are used as a key
for the object.</dd>
<dt>value</dt>
<dd>The object to be stored.</dd>
</dl>
<p><strong>Optional argument:</strong></p>
<dl class="docutils">
<dt>own</dt>
<dd>When set to True, the cache will take care of denouncing the
memory usage due to this array.</dd>
<dt>tags</dt>
<dd>Tags to be associated with the object</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="horton.cache.Cache.iteritems">
<code class="descname">iteritems</code><span class="sig-paren">(</span><em>tags=None</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.Cache.iteritems" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all valid items in the cache.</p>
</dd></dl>

<dl class="method">
<dt id="horton.cache.Cache.iterkeys">
<code class="descname">iterkeys</code><span class="sig-paren">(</span><em>tags=None</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.Cache.iterkeys" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the keys of all valid items in the cache.</p>
</dd></dl>

<dl class="method">
<dt id="horton.cache.Cache.itervalues">
<code class="descname">itervalues</code><span class="sig-paren">(</span><em>tags=None</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.Cache.itervalues" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over the values of all valid items in the cache.</p>
</dd></dl>

<dl class="method">
<dt id="horton.cache.Cache.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>*key</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.Cache.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a value from the cache</p>
<p><strong>Arguments:</strong></p>
<dl class="docutils">
<dt>key0 [key1 ...]</dt>
<dd>All positional arguments are used as keys to identify the cached
value.</dd>
</dl>
<p><strong>Optional arguments:</strong></p>
<dl class="docutils">
<dt>alloc</dt>
<dd>Parameters used to allocate a cached value if it is not present
yet. This argument can take two forms. When integer or a
tuple of integers is given, an array is allocated.
Alternatively, a tuple may be given whose first element is a
constructor, and further elements are arguments for that
constructor.</dd>
<dt>default</dt>
<dd>A default value that is returned when the key does not exist in
the cache. This default value is not stored in the cache.</dd>
<dt>tags</dt>
<dd>When alloc is used and a new object is thereby created or
reused, it will get these tags. This argument is only allowed if
the alloc argument is present. In case no new object is
allocated, the given tags must match those already present.</dd>
</dl>
<p>The optional argument alloc and default are both meant to handle
situations when the key has not associated value. Hence they can not
be both present.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="horton.cache.just_once">
<code class="descclassname">horton.cache.</code><code class="descname">just_once</code><span class="sig-paren">(</span><em>fn</em><span class="sig-paren">)</span><a class="headerlink" href="#horton.cache.just_once" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mod_horton_cext.html" class="btn btn-neutral float-right" title="3.1.2. horton.cext – C++ extensions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pck_horton.html" class="btn btn-neutral" title="3.1. horton – The main HORTON Package" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div>Documentation for HORTON 2.0.0 built from release 2.0.0-244-gaaf5e2b. </div>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2015, The HORTON Development Team.
      Last updated on Jun 16, 2016.
    </p>
  </div>

  <div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'2.0.0-244-gaaf5e2b',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>